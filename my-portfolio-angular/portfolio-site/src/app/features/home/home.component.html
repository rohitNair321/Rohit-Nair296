<!-- home.component.html -->
<div class="home-page" *ngIf="homeData">
  <section id="home" class="hero-section">
    <div class="hero-content">
      <div class="profile-container">
        <!-- Left: Text Content -->
        <div class="text-content">
          <h1 class="animate-slide-up">Hi, I'm {{ homeData?.hero?.name }}</h1>
          <p class="animate-slide-up-delay">{{ homeData?.hero?.description }}</p>
          <div class="typing-text animate-slide-up-delay-2">
            <span *ngFor="let skill of homeData?.hero?.skills; let last = last">
              {{ skill }}<span *ngIf="!last"> â€¢ </span>
            </span>
          </div>
          <div class="hero-buttons">
            <button class="cta-button animate-fade-in-delay" (click)="scrollToSection($event, '#projects')">My Work</button>
            <button class="cta-button outline animate-fade-in-delay" (click)="scrollToSection($event, '#contact')">Contact Me</button>
          </div>
        </div>
        <!-- Right: Profile Photo & Resume Button -->
        <div class="profile-photo">
          <img [src]="homeData?.hero?.profileImage" alt="Developer portrait" />
          <a class="resume-download-btn" [href]="homeData?.hero?.resume" download>
            <span class="material-icons">download</span>
            Download Resume
          </a>
        </div>
      </div>
    </div>
  </section>

  <section id="about" class="about-teaser-section">
    <div class="about-container">
      <div class="about-photo animate-fade-in-left">
        <img [src]="homeData?.aboutTeaser?.photo" alt="Rohit Nair" />
      </div>
      <div class="about-text animate-fade-in-right">
        <h2>{{ homeData?.aboutTeaser?.title }}</h2>
        <p [innerHTML]="homeData?.aboutTeaser?.description"></p>
        <div class="group-btn animate-fade-in-up">
          <a class="resume-download-btn about-res-width" routerLink="/about-me">
            <span class="material-icons">read_more</span>
            Read More
          </a>
          <a class="resume-download-btn about-res-width" routerLink="/view-resume">
            <span class="material-icons">open_in_new</span>
            View resume
          </a>
          <a class="resume-download-btn about-res-width" [href]="homeData?.aboutTeaser?.resume" download>
            <span class="material-icons">download</span>
            Resume
          </a>
        </div>
      </div>
    </div>
  </section>

  <section id="projects" class="portfolio-showcase-section">
  <h2 class="animate-fade-in-up">My Work</h2>
  <div class="portfolio-scroll-container">
    <div class="portfolio-card-list">
      <p-card class="portfolio-card" *ngFor="let project of homeData?.projects">
        <ng-template pTemplate="header">
          <div class="portfolio-card-header">
            <span class="portfolio-card-title">{{ project?.title }}</span>
          </div>
        </ng-template>
        <div class="portfolio-card-content">
          <p>
            {{ project?.description.length > 160 ? (project?.description | slice:0:160) + '...' : project?.description }}
          </p>
          <div class="tech-list">
            <span class="tech-badge" *ngFor="let tech of project?.technologies" [ngClass]="techClass(tech)">
              {{ tech }}
            </span>
          </div>
        </div>
        <ng-template pTemplate="footer">
          <div class="portfolio-card-actions">
            <a class="view-project-detail" [href]="project?.liveDemo" target="_blank" rel="noopener">
              <span class="material-icons">open_in_new</span>
              Read More
            </a>
            <a class="live-demo-btn" *ngIf="project?.liveDemo" [href]="project?.liveDemo" target="_blank" rel="noopener">
              <span class="material-icons">open_in_new</span>
              Live Demo
            </a>
            <a class="source-link" *ngIf="project?.sourceCode" [href]="project?.sourceCode" target="_blank" rel="noopener">
              Source
            </a>
          </div>
        </ng-template>
      </p-card>
    </div>
  </div>
  </section>

  <section id="contact" class="cta-section contact-section animate-fade-in-up">
    <h2>{{homeData?.contact?.headingText}}</h2>
    <p>{{homeData?.contact?.subHeadingText}}</p>
    <div class="contact-grid">
      <!-- Left: Contact Info Cards -->
      <div class="contact-info-cards">
        <div class="contact-card">
          <span class="material-icons contact-icon">email</span>
          <div class="text-md-start">
            <h4>Email</h4>
            <p>
              <a [href]="'mailto:' + homeData?.contact?.email" class="contact-link">{{ homeData?.contact?.email }}</a>
            </p>
          </div>
        </div>
        <div class="contact-card">
          <span class="material-icons contact-icon">phone</span>
          <div class="text-md-start">
            <h4>Phone</h4>
            <p>
              <a [href]="'tel:' + homeData?.contact?.phone" class="contact-link">{{ homeData?.contact?.phone }}</a>
            </p>
          </div>
        </div>
        <div class="contact-card">
          <span class="material-icons contact-icon">location_on</span>
          <div class="text-md-start">
            <h4>Location</h4>
            <p>{{ homeData.contact.address }}</p>
          </div>
        </div>
      </div>
      <!-- Right: Contact Form -->
      <div class="contact-form-card animate-fade-in-right">
        <form [formGroup]="contactForm" (ngSubmit)="onSubmitContact()">
          <h3 class="form-title">Send a Message</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="name">Your Name</label>
              <input id="name" formControlName="name" type="text" placeholder="Enter your name"
                [class.invalid]="name?.invalid && (name?.touched || name?.dirty)">
              <div class="form-error" *ngIf="name?.invalid && (name?.touched || name?.dirty)">
                <small *ngIf="name?.errors?.['required']">Name is required.</small>
                <small *ngIf="name?.errors?.['maxLength']">Max 50 characters.</small>
              </div>
            </div>
            <div class="form-group">
              <label for="email">Your Email</label>
              <input id="email" formControlName="email" type="email" placeholder="Enter your email"
                [class.invalid]="email?.invalid && (email?.touched || email?.dirty)">
              <div class="form-error" *ngIf="email?.invalid && (email?.touched || email?.dirty)">
                <small *ngIf="email?.errors?.['required']">Email is required.</small>
                <small *ngIf="email?.errors?.['email']">Invalid email address.</small>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="subject">Subject</label>
            <input id="subject" formControlName="subject" type="text" placeholder="Subject"
              [class.invalid]="subject?.invalid && (subject?.touched || subject?.dirty)">
            <div class="form-error" *ngIf="subject?.invalid && (subject?.touched || subject?.dirty)">
              <small *ngIf="subject?.errors?.['required']">Subject is required.</small>
              <small *ngIf="subject?.errors?.['maxLength']">Max 60 characters.</small>
            </div>
          </div>
          <div class="form-group">
            <label for="message">Message</label>
            <textarea id="message" formControlName="message" rows="4" placeholder="Type your message..."
              [class.invalid]="message?.invalid && (message?.touched || message?.dirty)"></textarea>
            <div class="form-error" *ngIf="message?.invalid && (message?.touched || message?.dirty)">
              <small *ngIf="message?.errors?.['required']">Message is required.</small>
              <small *ngIf="message?.errors?.['maxLength']">Max 500 characters.</small>
            </div>
          </div>
          <button type="submit" class="contact-button" [disabled]="sending || contactForm.invalid">
            <span class="material-icons" *ngIf="!sending">send</span>
            <span class="spinner" *ngIf="sending"></span>
            {{ sending ? 'Sending...' : 'Send' }}
          </button>
          <div class="form-success" *ngIf="sent">
            <span class="material-icons">check_circle</span> Message sent!
          </div>
        </form>
      </div>
    </div>
  </section>
</div>